# tgdlbot - Telegram YouTube Downloader Bot

Telegram –±–æ—Ç –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ —Å YouTube.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üé¨ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ —Å YouTube
- üéØ –£–º–Ω—ã–π –≤—ã–±–æ—Ä –∫–∞—á–µ—Å—Ç–≤–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –º–∞–∫—Å. –∫–∞—á–µ—Å—Ç–≤–æ, –º–∏–Ω–∏–º—É–º 720p, –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 50MB)
- ‚úÇÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ –±–æ–ª—å—à–∏—Ö –≤–∏–¥–µ–æ –Ω–∞ —á–∞—Å—Ç–∏ –ø–æ 50MB
- üìè –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (–ª–∏–º–∏—Ç Telegram API)
- üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- üóëÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- üê≥ Multi-stage Docker build

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.13+
- Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ß–µ—Ä–µ–∑ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
   ```bash
   git clone <repository-url>
   cd tgdlbot
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`**
   ```bash
   cp .env.example .env
   ```

3. **–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞**
   - –ù–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
   - –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env` —Ñ–∞–π–ª:
     ```
     TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
     ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞**
   ```bash
   docker-compose up -d
   ```

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**
   ```bash
   docker-compose logs -f tgdlbot
   ```

6. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞**
   ```bash
   docker-compose down
   ```

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
   ```bash
   uv sync --extra dev
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª** (—Å–º. –≤—ã—à–µ)

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞**
   ```bash
   uv run python bot.py
   ```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã:

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
uv run pytest tests/ -v

# –í Docker
docker-compose run tgdlbot uv run pytest tests/ -v
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –¥–ª—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/help` –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∏–¥–µ–æ YouTube –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Å—Å—ã–ª–æ–∫

- `https://www.youtube.com/watch?v=...`
- `https://youtu.be/...`
- `https://www.youtube.com/shorts/...`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
tgdlbot/
‚îú‚îÄ‚îÄ bot.py              # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ tests/              # –¢–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ test_bot.py
‚îú‚îÄ‚îÄ .env.example        # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ Dockerfile          # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml  # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ pyproject.toml      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ‚îÄ README.md           # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 50MB (–ª–∏–º–∏—Ç Telegram API)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∏ –Ω–∞ YouTube

## –£–º–Ω—ã–π –≤—ã–±–æ—Ä –∫–∞—á–µ—Å—Ç–≤–∞

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ —Å —É—á–µ—Ç–æ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π:

1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ö–∞—á–µ—Å—Ç–≤–æ >= 720p, –Ω–æ <= 50MB
2. **Fallback**: –ï—Å–ª–∏ –Ω–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∞ >= 720p –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 50MB, –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ª—É—á—à–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–π
3. **–†–∞–∑–±–∏–µ–Ω–∏–µ**: –ï—Å–ª–∏ –≤–∏–¥–µ–æ –≤—Å–µ –µ—â–µ > 50MB –¥–∞–∂–µ –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –∫–∞—á–µ—Å—Ç–≤–µ, –æ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —á–∞—Å—Ç–∏

### –ü—Ä–∏–º–µ—Ä—ã:

| –ò—Å—Ö–æ–¥–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ | –†–∞–∑–º–µ—Ä | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|-------------------|--------|-----------|
| 1080p | 30MB | ‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Ü–µ–ª–∏–∫–æ–º (1080p) |
| 1080p | 80MB | ‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Ü–µ–ª–∏–∫–æ–º (720p –∏–ª–∏ –Ω–∏–∂–µ) |
| 720p | 60MB | ‚úÖ –†–∞–∑–±–∏—Ç–æ –Ω–∞ 2 —á–∞—Å—Ç–∏ –ø–æ 50MB |

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
uv add package_name
```

### –ó–∞–ø—É—Å–∫ —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –≥–æ—Ä—è—á–µ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
uv pip install watchfiles
uv run watchfiles python bot.py
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
